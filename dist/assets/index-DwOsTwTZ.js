const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Signup-Bt9xN9ao.js","assets/vendor-JV4b0bO8.js","assets/Button-C4S57wnW.js","assets/Login-BLwPA8q9.js","assets/VerifyMobile-B_LiR_V_.js","assets/userApi-BvSZO4a6.js","assets/AdminDashboard-Bq7Jh_YW.js","assets/UserHeader-C593a15d.js","assets/UserDashboard-zA7U_o4F.js","assets/Cart-DfbmYLt2.js","assets/UserOrders-rh2IRsTt.js","assets/Landing-m_W30Tkm.js","assets/ContactUs-DJQnUc0B.js"])))=>i.map(i=>d[i]);
import{i as k,g as O,G as w,r as i,j as e,R as h,O as R,a as C,b as m,o as D,u as E,c as N,d as y,V as S,N as _,e as V,B as q}from"./vendor-JV4b0bO8.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&f(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function f(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const z="modulepreload",T=function(a){return"/"+a},v={},g=function(u,r,f){let t=Promise.resolve();if(r&&r.length>0){let d=function(s){return Promise.all(s.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),x=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));t=d(r.map(s=>{if(s=T(s),s in v)return;v[s]=!0;const l=s.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${p}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":z,l||(n.as="script"),n.crossOrigin="",n.href=s,x&&n.setAttribute("nonce",x),document.head.appendChild(n),l)return new Promise((I,A)=>{n.addEventListener("load",I),n.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${s}`)))})}))}function o(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return t.then(d=>{for(const c of d||[])c.status==="rejected"&&o(c.reason);return u().catch(o)})},U={apiKey:"AIzaSyAqX2UKQgFuy0AAlDXwzrZGvwFgEsQ5ePQ",authDomain:"mvps-7adb0.firebaseapp.com",projectId:"mvps-7adb0",storageBucket:"mvps-7adb0.appspot.com",messagingSenderId:"617672630606",appId:"1:617672630606:web:25dcaa6f784e266e677e1f"},$=k(U),b=O($),P=new w;P.addScope("profile");P.addScope("email");const L=i.createContext(),B=()=>i.useContext(L);function F({children:a}){const[u,r]=i.useState([]),[f,t]=i.useState(()=>{const x=localStorage.getItem("mvps-cart-stationery");return x?JSON.parse(x):[]});i.useEffect(()=>{localStorage.setItem("mvps-cart-stationery",JSON.stringify(f))},[f]);const o=(x,s)=>{x==="print"?r(l=>{const p=l.findIndex(n=>n.id===s.id&&n.color===s.color);if(p!==-1){const n=[...l];return n[p].quantity+=s.quantity||1,n}else return[...l,{...s,quantity:s.quantity||1}]}):t(l=>{const p=l.findIndex(n=>n.id===s.id&&n.color===s.color);if(p!==-1){const n=[...l];return n[p].quantity+=s.quantity||1,n}else return[...l,{...s,quantity:s.quantity||1}]})},d=(x,s)=>{x==="print"?r(l=>l.filter((p,n)=>n!==s)):t(l=>l.filter((p,n)=>n!==s))},c=()=>{r([]),t([]),localStorage.removeItem("mvps-cart-stationery")};return e.jsx(L.Provider,{value:{cartItems:{print:u,stationery:f},addToCart:o,removeFromCart:d,clearCart:c},children:a})}const G=h.lazy(()=>g(()=>import("./Signup-Bt9xN9ao.js"),__vite__mapDeps([0,1,2]))),K=h.lazy(()=>g(()=>import("./Login-BLwPA8q9.js"),__vite__mapDeps([3,1,2]))),Q=h.lazy(()=>g(()=>import("./VerifyMobile-B_LiR_V_.js"),__vite__mapDeps([4,1,5,2]))),J=h.lazy(()=>g(()=>import("./AdminDashboard-Bq7Jh_YW.js"),__vite__mapDeps([6,1,2,7,5]))),X=h.lazy(()=>g(()=>import("./UserDashboard-zA7U_o4F.js"),__vite__mapDeps([8,1,2,7]))),Y=h.lazy(()=>g(()=>import("./Cart-DfbmYLt2.js"),__vite__mapDeps([9,1,2]))),M=h.lazy(()=>g(()=>import("./UserOrders-rh2IRsTt.js"),__vite__mapDeps([10,1,2]))),W=h.lazy(()=>g(()=>import("./Landing-m_W30Tkm.js"),__vite__mapDeps([11,1]))),Z=h.lazy(()=>g(()=>import("./ContactUs-DJQnUc0B.js"),__vite__mapDeps([12,1])));function H({children:a}){const{clearCart:u}=B(),[r,f]=i.useState(!1);return i.useEffect(()=>D(b,o=>{o||u(),f(!0)}),[]),r?a:e.jsx("div",{className:"text-center mt-10",children:"Loading…"})}function j({children:a}){const[u,r]=i.useState("checking"),f=E(),t=N();return i.useEffect(()=>{(async()=>{const o=b.currentUser;if(!o){r("redirectLogin");return}if(f.pathname==="/verify-mobile"){r("ok");return}try{const d=await y.get(`/api/get-role?email=${o.email}`);if(!["user","admin"].includes(d.data.role)){r("redirectLogin");return}const c=await y.get(`/api/get-profile?email=${o.email}`);if(c.data.blocked){S.error("Your account has been blocked."),r("blocked");return}if(!c.data.mobileVerified){r("verify");return}r("ok")}catch{r("redirectLogin")}})()},[f.pathname,t]),u==="checking"?e.jsx("div",{className:"text-center mt-10",children:"Checking access…"}):u==="redirectLogin"||u==="blocked"?e.jsx(_,{to:"/login",replace:!0}):u==="verify"?e.jsx(_,{to:"/verify-mobile",replace:!0}):a}function ee({children:a}){const[u,r]=i.useState(null),f=E();return i.useEffect(()=>{(async()=>{const t=b.currentUser;if(!t){r(!1);return}try{if((await y.get(`/api/get-role?email=${t.email}`)).data.role!=="admin"){r(!1);return}if((await y.get(`/api/get-profile?email=${t.email}`)).data.blocked){S.error("Your account has been blocked."),r(!1);return}r(!0)}catch{r(!1)}})()},[f.pathname]),u===null?e.jsx("div",{className:"text-center mt-10",children:"Checking access…"}):u?a:e.jsx(_,{to:"/userdashboard",replace:!0})}function te(){const a=e.jsx("div",{className:"text-center mt-10",children:"Loading…"});return e.jsx(F,{children:e.jsxs(H,{children:[e.jsx(R,{position:"top-center"}),e.jsxs(C,{children:[e.jsx(m,{path:"/",element:e.jsx(i.Suspense,{fallback:a,children:e.jsx(W,{})})}),e.jsx(m,{path:"/contact-us",element:e.jsx(i.Suspense,{fallback:a,children:e.jsx(Z,{})})}),e.jsx(m,{path:"/login",element:e.jsx(i.Suspense,{fallback:a,children:e.jsx(K,{})})}),e.jsx(m,{path:"/signup",element:e.jsx(i.Suspense,{fallback:a,children:e.jsx(G,{})})}),e.jsx(m,{path:"/verify-mobile",element:e.jsx(i.Suspense,{fallback:a,children:e.jsx(Q,{})})}),e.jsx(m,{path:"/userdashboard",element:e.jsx(j,{children:e.jsx(i.Suspense,{fallback:a,children:e.jsx(X,{})})})}),e.jsx(m,{path:"/cart",element:e.jsx(j,{children:e.jsx(i.Suspense,{fallback:a,children:e.jsx(Y,{})})})}),e.jsx(m,{path:"/orders",element:e.jsx(j,{children:e.jsx(i.Suspense,{fallback:a,children:e.jsx(M,{})})})}),e.jsx(m,{path:"/admin",element:e.jsx(ee,{children:e.jsx(i.Suspense,{fallback:a,children:e.jsx(J,{})})})}),e.jsx(m,{path:"*",element:e.jsx("div",{className:"text-center text-red-500 mt-10",children:"404 - Page Not Found"})})]})]})})}typeof window<"u"&&window.eruda&&window.eruda.destroy();V.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(q,{basename:"/",children:e.jsx(te,{})})}));export{b as a,P as g,B as u};
